<%- model_class = CfTemplate -%>
<% master_admin = current_user.master? && current_user.admin? %>
<div class="page-header">
  <h1><%= t('cf_templates.cf_template') %></h1>
</div>

<table class="table">
  <thead>
    <tr>
      <th><%= t('cf_templates.subject') %></th>
      <th><%= t('cf_templates.details') %></th>
      <th><%= t('common.actions') %></th>
    </tr>
  </thead>
  <tbody>
    <% @global_jsons.each do |json| %>
      <tr data-managejson-id="<%= json.id %>">
        <td><%= json.name %></td>
        <td><%= json.detail %></td>
        <td>
          <%= link_to t('helpers.links.show'), '#', class: 'btn btn-xs btn-info show-template' %>
          <% if master_admin %>
            <%= link_to t('.edit', default: t("helpers.links.edit").html_safe),
              edit_cf_template_path(json),
              class:  'btn btn-default btn-xs' %>
            <%= link_to t('.destroy', default: t("helpers.links.destroy").html_safe),
              cf_template_path(json),
              method: :delete,
              data:   { confirm: t('.confirm', default: t("helpers.links.confirm")) },
              class:  'btn btn-xs btn-danger' %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="text-center">
  <%= paginate(@global_jsons) %>
</div>


<% if master_admin %>
  <%= link_to t('.new', default: t('cf_templates.btn.add')),
    new_cf_template_path,
    class: 'btn btn-primary btn-sm' %>

  <%= link_to t('template_builder.template_builder'),
    new_template_builder_path,
    class: 'btn btn-primary btn-sm' %>
<% end %>

<div class="page-header"></div>

<div id="template-information"></div>

<% content_for :sidebar do %>
<% end %>
